package org.tezevsk.navyplugin;

import org.bukkit.Bukkit;
import org.bukkit.Location;
import org.bukkit.World;
import org.bukkit.command.Command;
import org.bukkit.command.CommandExecutor;
import org.bukkit.command.CommandSender;
import org.bukkit.entity.Player;

import net.md_5.bungee.api.ChatColor;
import org.bukkit.plugin.java.JavaPlugin;

public class navyCommand implements CommandExecutor {

    @Override
  public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {
      
    if (command.getName().equalsIgnoreCase("navy")) {
        if (args.length > 0 && args[0].equalsIgnoreCase("help")) {
            sender.sendMessage("List of commands:\n Commands inherent to navy\n  /navy help §6This page\n  §r/navy list §6List avaible worlds\n  §r/navy <dest> §6Teleport to location\n");

            return true;
        }
        if (sender instanceof Player p) {
            // /execute ...

            String worldOrigin = getConfig().getString("Overrides."+args[0]);

            World targetWorld = Bukkit.getServer().getWorld(worldOrigin);
            if (targetWorld == null) {
                // Handle the case where the world doesn't exist or isn't loaded
                p.sendMessage(ChatColor.RED + "The world or command '"+args[0]+"' could not be found or loaded.");
                return true;
            }

            double x = getConfig().getDouble("Spawn."+worldOrigin+".x");
            double y = getConfig().getDouble("Spawn."+worldOrigin+".y");
            double z = getConfig().getDouble("Spawn."+worldOrigin+".z");

            Location destination = new Location(targetWorld, x, y, z, getConfig().getInt("Spawn."+worldOrigin+".yaw"), getConfig().getInt("Spawn."+worldOrigin+".pitch"));
            p.teleport(destination);

            p.sendMessage(ChatColor.BLUE + "You're now in "+args[0]+"!");

            return true;
        }
        else {
            System.out.println("Can be only executed by player");

            return false;
        }
    }

    return true;
  }
    
}
